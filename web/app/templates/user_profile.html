{% extends "base.html" %}

{% block content %}
<br>
<ul class="horizontal-list">
    <li><img src="{{ stats.avatar_url or url_for('static', filename='images/base_avatar_big.png') }}" class="big-pp" alt="avatar"
        onerror="this.onerror=null; this.src='{{ fallback_avatar }}';"></li>
    <li><div class="big-bold-text gray">{{stats.username}}</div></li>
</ul>
<br>
<div class="medium-bold-text">Statistiques</div>
<div class="gray-box stats-box">
    <div class="big-bold-text">{{ stats.rank }}/{{ stats.total_user }}</div>
    <div class="medium-bold-text gray">{{ stats.total_time }}</div>
    <div class="medium-bold-text gray">{{ stats.total_message }} messages</div>
    <div class="medium-bold-text gray">
        {{ (stats.total_time_last_30d / 3600) | round(1) }} h les 30 derniers jours
    </div>
</div>
<div class="medium-bold-text">Serveurs</div>
{% for server in stats.user_servers_stats %}
<div class="gray-box link">
    <a class="link" href="{{ url_for('server_profile.server', server_id=server['server_id']) }}">
    <ul class="horizontal-list nowrap nomargin nogap">
        <div>
            <li><img src="{{ server.avatar or url_for('static', filename='images/base_avatar_big.png') }}" class="big-pp boder-server" alt="avatar"
                onerror="this.onerror=null; this.src='{{ fallback_avatar }}';"></li>
        </div>
        <div>
            <ul class="nopadding">
                <li><div class="big-bold-text nomargin">{{ server.server_name }}</div></li>
                <li><div class="medium-bold-text gray nomargin">{{ server.rank }}/{{ server.nb_user }}</div></li>
                <li><div class="medium-bold-text gray nomargin">{{ server.time_spent }} heures</div></li>
                <li><div class="medium-bold-text gray nomargin">{{ server.messages_count }} messages</div></li>
                <li><div class="medium-bold-text gray nomargin">Membre depuis le {{ server.joined_at }}</div></li>
            </ul>
        </div>
    </ul>
    </a>
</div>
{% endfor %}

{% endblock %}